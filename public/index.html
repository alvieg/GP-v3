<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>about:blank</title>
        <script src="/uv/uv.bundle.js"></script>
        <script src="/uv/uv.config.js"></script>
        <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register("/uv/sw.js", {
                    scope: __uv$config.prefix,
                });
            });
        }
        </script>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
            * {
                font-family: 'Orbitron', sans-serif;
                cursor: url('pizza.gif');
                animation: fadeIn 3s;
            }
            @keyframes fadeIn {
                from {
                    opacity: 0;
                } to {
                    opacity: 1;
                }
            }
            @keyframes darkToLight {
                from {
                    background-color: black;
                } 
                to {
                    background-color: white;
                }
            }
            @keyframes lightToDark {
                from {
                    background-color: white;
                } 
                to {
                    background-color: black;
                }
            }
            .title {
                text-align: center;
                color: var(--txt-color);
                font-size: 48px;
            }
            :root {
                --button-color: dodgerblue;
                --txt-color: white;
                --bg-color: black;
                --button-txt-color: white;
                --btn-hover-bg-clr: black;
            }
            body.light {
                --button-color: dodgerblue;
                --txt-color: dodgerblue;
                --bg-color: white;
                --btn-hover-bg-clr: white;
                --button-txt-color: black;
                animation: darkToLight 3s;
            }
            body {
                background-color: var(--bg-color);
                color: dodgerblue;
                animation: lightToDark 3s;
            }
            .buttonSpace button {
                background-color: var(--button-color);
                color: var(--button-txt-color);
                border: 2px solid dodgerblue;
                border-radius: 8px;
                font-size: 9vh;
                text-align: center;
                justify-content: center;
                margin-left: 1vh;
                margin-right: 1vh;
                margin-top: 1vh;
                margin-bottom: 1vh;
                width: 48vw;
                height: 15vh;
                transition: transform 0.3s ease-in-out, border-radius 0.8s ease-in-out; 
            }
            .buttonSpace button:hover {
                background-color: var(--btn-hover-bg-clr);
                border-radius: 100px;
                color: dodgerblue;
                transform: scale(1.025);
                transition: transform 0.3s ease-in-out, border-radius 0.8s ease-in-out;
            }
            #launchInAboutBlankBtn, #toggle, .modalToolbar button {
                background-color: var(--button-color);
                color: var(--button-txt-color);
                border: 2px solid dodgerblue;
                border-radius: 8px;
                text-align: center;
                font-size: 12px;
                justify-content: center;
                margin: 1vh;
                width: 10vw;
                height: 5vh;
                transition: transform 0.3s ease-in-out, border-radius 0.5s ease-in-out; 
            }
            .modalToolbar:hover {
                background-color: var(--btn-hover-bg-clr);
                border-radius: 30px;
                color: dodgerblue;
                transition: border-radius 0.5s ease-in-out;
            }
            #launchInAboutBlankBtn:hover, #toggle:hover {
                background-color: var(--btn-hover-bg-clr);
                border-radius: 30px;
                color: dodgerblue;
                transform: scale(1.025);
                transition: transform 0.3s ease-in-out, border-radius 0.5s ease-in-out;
            }
            .modal {
                display: none; /* Hidden by default */
                position: fixed;
                top: 50%;
                left: 50%;
                height: 95%;
                width: 100%;
                transform: translate(-50%, -47.5%);
                background-color: var(--bg-color);
                padding: 0;
                border: none;
                border-radius: 0;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                z-index: 999;
                overflow: Hidden
            }
            .modalToolbar {
                display: none;
                position: fixed;
                top: 2.5%;
                left: 50%;
                height: 5%;
                width: 100%;
                transform: translate(-50%, -50%);
                z-index: 1002;
                overflow: Hidden;
                background-color: var(--bg-color);
                padding: 0;
                border: none;
                border-radius: 0;
                justify-content: space-evenly;
                align-items: center;
            }
            .modal-overlay {
                display: none; /* Hidden by default */
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 998;
            }
            #closeBtn {
                z-index: 1001;
                border: none;
                background-color: rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                transition: all 0.2s ease-in;
            }
            #closeBtn:hover {
                background-color: rgba(0,0,0,0.3);
                transform: scale(1.05);
            }
            #iframe {
                height: 100%;
                width: 100%;
                margin: none;
                border: none;
                border-radius: 8px;
                overflow: hidden;
                z-index: 1000;
            }
            h2 {
                font-size: 24px;
                color: var(--txt-color)
            }
            a {
                position: relative;
                color: deepskyblue;
                text-decoration: none;
                font-size: 12px;
            }
            a::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                height: 2px;
                width: 100%;
                background-color: deepskyblue;
                transform: scaleX(0);
                transform-origin: center;
                transition: transform .25s linear;
            }
            a:hover::after {
                transform: scaleX(1);
            }
            .footer {
                display: flex;
                justify-content: space-evenly;
                align-items: center;
                padding: 10px;
            }
        </style>
    </head>
    <body>
        <div class="title">
            <h1 class="title" id="title">Click a button to open in PopUp</h1>
            <h2 class="sectionTitle">Click alt escape or click out to close the PopUp</h2>
            <button id="toggle" onclick="toggleTheme()" class="toggle">Toggle Light/Dark</button>
            <button class="toggle" id="launchInAboutBlankBtn" onclick="openInNewTab('https://aboutblankcloaker.w3spaces.com')">Open in About:Blank</button>
        </div>
        <div id="buttonSpace" class="buttonSpace"><!--buttons created by js--></div>
        <br><br>
        <br><br>
        <div class="title">
            <h2 class="sectionTitle">Proxied Sites (May Not Work)</h2>
        </div>
        <div id="proxyButtonSpace" class="buttonSpace"><!--button created by js--></div>
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modalToolbar" id="modalToolbar">
            <button class="modalToolbarBtn closeModalBtn" onclick="closeModal()">Close</button>
            <!--<button class="modalToolbarBtn FsBtn">Fullscreen</button>-->
            <button class="modalToolbarBtn AbtBlnkBtn" onclick="redirect()">Open In About:Blank</button>
        </div>
        <div class="modal" id="modal">
            <embed id="iframe">
        </div>
        <div class="footer">
            <a target="_blank" class="otherLinks" href="https://donutgames.w3spaces.com">Donut Games</a>
            <a target="_blank" class="otherLinks" href="https://multigames.w3spaces.com">MultiGames</a>
            <a target="_blank" class="otherLinks" href="https://abesgames.odoo.com">Abe's Games</a>
        </div>
        <script>
            const gameButtons = {
                "GHUB":"https://thegportal.neocities.org",
                "Burger Awesome":"https://burgerawesome.neocities.org",
                "HaHa Games":"https://hahagames.com",
                "Butter Dog Games":"https://teachers-are-the-best.neocities.org",
                "GN-Math":"https://gn-math.github.io",
                "MiniPlay":"https://miniplay.com",
                "GHUB V2":"https://v2.thegportal.net",
                "Space (Proxy)":"https://gointospace.app",
                "3KH0":"https://3kh0s.github.io",
                "Games 4 Free":"https://games-4-free.com",
                "Proxy (WIP)":"https://gameportal-v3-2025.vercel.app/proxy.html",
                "Interstellar":"https://interstellar-2025.vercel.app/",
            };

            const proxiedGB = {
                "Poki":"https://poki.com",
                "CrazyGames":"https://crazygames.com",
            };
            
            const buttonSpace = document.getElementById('buttonSpace');

            const proxiedButtonSpace = document.getElementById('proxyButtonSpace')
            
            for (const [key, value] of Object.entries(gameButtons)) {
                const button = document.createElement('button');
                button.textContent = key;
                button.onclick = () => openModal(value);
                buttonSpace.appendChild(button);
            };

            for (const [key, value] of Object.entries(proxiedGB)) {
                const button = document.createElement('button');
                button.textContent = key;
                button.onclick = () => openProxyModal(value);
                proxiedButtonSpace.appendChild(button);
            };
            
            function checkHTTP(VAR) {
                if (!VAR.startsWith('https://') && !VAR.startsWith('http://')) {
                    VAR = "https://" + VAR;
                };
            };
            function openInNewTab(URL) {
                var win = window.open();
                win.document.body.style.margin = '0';
                win.document.body.style.height = '100vh';
                var iframe = win.document.createElement('embed');
                iframe.style.border = 'none';
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.margin = '0';
                var url = URL;
                checkHTTP(url)
                iframe.src = url;
                win.document.body.appendChild(iframe);
                var script = win.document.createElement('script');
                script.innerHTML = "setTimeout(() => { location.reload(true); }, 10800 * 1000);";
                win.document.body.appendChild(script);
                window.close();
                console.log(url);
            };
            function toggleTheme() {
                document.body.classList.toggle('light');
            };
            // Select elements
            const closeModalBtn = document.getElementById('closeModalBtn');
            const modal = document.getElementById('modal');
            const modalOverlay = document.getElementById('modalOverlay');
            const embed = document.getElementById('iframe')
            const modalTB = document.getElementById('modalToolbar');

            // Function to open modal
            function openModal(URL) {
                modal.style.display = 'block';
                modalOverlay.style.display = 'block';
                modalTB.style.display = 'flex';
                modalTB.style.flex-direction = 'column';
                embed.src = URL
            };

            function openProxyModal(URL) {
                modal.style.display = 'block';
                modalOverlay.style.display = 'block';
                modalTB.style.display = 'block';
                embed.src = __uv$config.prefix + __uv$config.encodeUrl(url);
            };
            
            //iframeWindow.src = __uv$config.prefix + __uv$config.encodeUrl(url);
            // Function to close modal
            function closeModal() {
                modal.style.display = 'none';
                modalOverlay.style.display = 'none';
                modalTB.style.display = 'none';
                embed.src = '';
            };

            // Event listeners
            modalOverlay.addEventListener('click', closeModal); // Close modal when clicking outside

            function redirect() {
                var src = document.getElementById('iframe').src;
                openInNewTab(src);
            };
        </script>
        <script src="script.js"></script>
    </body>
</html>
